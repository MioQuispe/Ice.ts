taskParams mode,installArgsChanged,upgradeArgsChanged,canisterExists,modulePresent,cacheExists,resolvedMode,cacheUsed,expectedOutcome,notes
auto,FALSE,FALSE,FALSE,FALSE,FALSE,install,FALSE,OK,"first deploy, fresh replica state, no canister"
auto,TRUE,FALSE,FALSE,FALSE,FALSE,install,FALSE,OK,same as above. technically this cant happen since installArgs cant have changed without a previous cached result
auto,FALSE,TRUE,FALSE,FALSE,FALSE,install,FALSE,OK,same as above. technically this cant happen since upgradeArgs cant have changed without a previous cached result
auto,FALSE,FALSE,TRUE,FALSE,FALSE,install,FALSE,OK,first deploy on existing but empty canister
auto,FALSE,FALSE,TRUE,TRUE,FALSE,reinstall,FALSE,OK,same as above. technically this cant happen since upgradeArgs cant have changed without a previous cached result
auto,TRUE,TRUE,FALSE,FALSE,FALSE,install,FALSE,OK,"both args changed, but no canister exists. just install"
auto,TRUE,FALSE,TRUE,FALSE,FALSE,install,FALSE,OK,
auto,FALSE,TRUE,TRUE,FALSE,FALSE,install,FALSE,OK,just install. cant upgrade empty canister
auto,FALSE,FALSE,FALSE,FALSE,TRUE,install,FALSE,OK,"canister empty, cache not valid"
auto,FALSE,FALSE,TRUE,TRUE,TRUE,latest,TRUE,OK,"canister exists and not empty, but should reuse install cache despite resolvedMode?"
auto,TRUE,FALSE,TRUE,TRUE,TRUE,reinstall,FALSE,OK,"installArgsFn changed, cant reuse cache, need to reinstall on existing canister"
auto,FALSE,TRUE,TRUE,TRUE,TRUE,upgrade,FALSE,OK,"upgradeArgsFn changed, cant reuse cache, need to upgrade"
auto,TRUE,TRUE,TRUE,TRUE,TRUE,reinstall,FALSE,OK,"both changed, install takes priority, but canister already exists -> so need to reinstall"
auto,FALSE,TRUE,TRUE,TRUE,FALSE,upgrade,FALSE,OK,"Canister exists, but we have no cache and only upgradeArgs changed? how do we detect this?"
auto,TRUE,FALSE,TRUE,TRUE,FALSE,reinstall,FALSE,OK,"same as above, but install takes priority so this one should work"
,,,,,,,,,
,,,,,,,,,
,,,,,,,,,
,,,,,,,,,
,,,,,,,,,
,,,,,,,,,
,,,,,,,,,
,,,,,,,,,
install,FALSE,FALSE,FALSE,FALSE,FALSE,install,FALSE,OK,"first intsall, fresh replica state, no canister"
install,TRUE,FALSE,FALSE,FALSE,FALSE,install,FALSE,OK,same as above. technically this cant happen since installArgs cant have changed without a previous cached result
install,FALSE,TRUE,FALSE,FALSE,FALSE,install,FALSE,OK,same as above. technically this cant happen since upgradeArgs cant have changed without a previous cached result
install,FALSE,FALSE,TRUE,FALSE,FALSE,install,FALSE,OK,first install on existing but empty canister
install,FALSE,FALSE,TRUE,TRUE,FALSE,install,FALSE,ERROR!,"Cant install on existing canister, must use reinstall"
install,TRUE,TRUE,FALSE,FALSE,FALSE,install,FALSE,OK,"both args changed, param takes precedence always"
install,TRUE,FALSE,TRUE,FALSE,FALSE,install,FALSE,OK,param takes precendence. install still works on empty canisters
install,FALSE,TRUE,TRUE,FALSE,FALSE,install,FALSE,OK,param takes precedence. install
install,FALSE,FALSE,FALSE,FALSE,TRUE,install,FALSE,OK,"canister empty, cache not valid"
install,FALSE,FALSE,TRUE,TRUE,TRUE,install,TRUE,OK,"canister exists and not empty, reuse cache"
install,TRUE,FALSE,TRUE,TRUE,TRUE,install,FALSE,ERROR!,"Cant install on existing canister, must use reinstall"
install,FALSE,TRUE,TRUE,TRUE,TRUE,install,TRUE,OK,"upgradeArgsFn changed, but params take precedence, cache still valid so reuse it"
install,TRUE,TRUE,TRUE,TRUE,TRUE,install,FALSE,ERROR!,"Cant install on existing canister, must use reinstall"
,,,,,,,,,
reinstall,FALSE,FALSE,FALSE,FALSE,FALSE,reinstall,FALSE,ERROR!,Cant reinstall non-existent canister
reinstall,TRUE,FALSE,FALSE,FALSE,FALSE,reinstall,FALSE,ERROR!,same as above
reinstall,FALSE,TRUE,FALSE,FALSE,FALSE,reinstall,FALSE,ERROR!,same as above
reinstall,FALSE,FALSE,TRUE,FALSE,FALSE,reinstall,FALSE,ERROR!,Not sure? first time probably needs to be install
reinstall,FALSE,FALSE,TRUE,TRUE,FALSE,reinstall,FALSE,OK,just reinstall
reinstall,TRUE,TRUE,FALSE,FALSE,FALSE,reinstall,FALSE,ERROR!,Cant reinstall non-existent canister
reinstall,TRUE,FALSE,TRUE,FALSE,FALSE,reinstall,FALSE,ERROR!,Cant reinstall empty canister
reinstall,FALSE,TRUE,TRUE,FALSE,FALSE,reinstall,FALSE,ERROR!,Cant reinstall empty canister. upgradeArgs irrelevant
reinstall,FALSE,FALSE,FALSE,FALSE,TRUE,reinstall,FALSE,ERROR!,Cache irrelevant for reinstall. cant reinstall non-existen canister
reinstall,FALSE,FALSE,TRUE,TRUE,TRUE,reinstall,FALSE,OK,"Reinstall canister, cache irrelevant for reinstall"
reinstall,TRUE,FALSE,TRUE,TRUE,TRUE,reinstall,FALSE,OK,just reinstall
reinstall,FALSE,TRUE,TRUE,TRUE,TRUE,reinstall,FALSE,OK,just reinstall. upgradeArgs irrelevant
reinstall,TRUE,TRUE,TRUE,TRUE,TRUE,reinstall,FALSE,OK,same as above
,,,,,,,,,
upgrade,FALSE,FALSE,FALSE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade non-existent canister
upgrade,TRUE,FALSE,FALSE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade non-existent canister
upgrade,FALSE,TRUE,FALSE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade non-existent canister
upgrade,FALSE,FALSE,TRUE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade empty canister
upgrade,FALSE,FALSE,TRUE,TRUE,FALSE,upgrade,FALSE,OK,just upgrade
upgrade,TRUE,TRUE,FALSE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade non-existent canister
upgrade,TRUE,FALSE,TRUE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade empty canister. installArgs irrelevant
upgrade,FALSE,TRUE,TRUE,FALSE,FALSE,upgrade,FALSE,ERROR!,Cant upgrade empty canister.
upgrade,FALSE,FALSE,FALSE,FALSE,TRUE,upgrade,FALSE,ERROR!,"Cant upgrade empty canister, cache not valid"
upgrade,FALSE,FALSE,TRUE,TRUE,TRUE,upgrade,TRUE,OK,"canister exists and not empty, reuse cache"
upgrade,TRUE,FALSE,TRUE,TRUE,TRUE,upgrade,TRUE,OK,"installArgsFn changed but irrelevant because params take precedence, reuse cache"
upgrade,FALSE,TRUE,TRUE,TRUE,TRUE,upgrade,FALSE,OK,"upgradeArgsFn changed, cant reuse cache, need to upgrade"
upgrade,TRUE,TRUE,TRUE,TRUE,TRUE,upgrade,FALSE,OK,"both changed, upgrade takes priority due to params"